

#### OSI参考模型

OSI 七层模型

![image-20210118142908371](C:\Users\MUYI\AppData\Roaming\Typora\typora-user-images\image-20210118142908371.png)

其中应用层，表示层， 会话层往往会合起来看做一个层即应用层，所以就有了 OSI 五层模型：应用层、传输层、网络层

数据链路层、物理层。

#### 以OSI五层模型来简述各层功能及协议

```
应用层：提供各种应用服务的，如web服务，远程登录服务，收发邮件服务等，常见的协议有 HTTP协议，SSH协议，SMTP/POP3 协议
传输层：负责数据的传输。如 TCP 协议的可靠性传输，UDP协议的高效传输
网络层：负责网络寻址和路由分发。常用的协议就是IP协议
数据链路层：将比特流组织成数据帧然后进行发送。如以太网协议
物理层：将数据组成 0、1 高低压电信号在物理介质中进行传输
```

#### 以发送电子邮件为例来说明数据在网络中的传输过程

```
1、发送的过程：
    应用程序：
        1、编辑邮件内容
        2、对内容进行编码处理                                 
        3、确定何时发送邮件以及发送邮件的方式
    传输层：
        TCP协议：负责TCP链接的创建和断开，并给数据添加tcp头部信息：源端口，目标端口，数据包的序号等
    网络层：
        IP：给数据包添加IP头部信息：源IP地址，目标IP地址，以及是TCP协议的包还是UDP协议的包，然后通过
        路由进行数据的转发
    数据链路层：
        以太网协议：给数据包添加以太网协议的头部信息，如源MAC地址，目标MAC地址等
    物理层：
        将数据包转换成高低压电信号通过物理介质进行传输
	
2、接收的过程：
      网络驱动：
         以太网接口，来判断mac是不是发送给自己的，不是丢弃。如果是的话，查看包的协议类型，如果是ip协议交给ip
        子程序进行处理，如果是其他的协议，如arp之类的丢给arp处理
    网络层：
        ip先看下ip地址是不是发给自己的，是的话，看下协议类型，tcp协议交给tcp处理，udp交给udp处理。如果是路由
        分发过来的，会在路由的控制表里找具体的地址
    传输层：
        tcp看校验下数据和，看包有没有被损坏，然后再检查下是不是在按照正确的序号收数据。没问题发一个确认收到的回执，
        如果收到了包不发回执的话，对方会一直发送数据包。最后根据头部中端口信息来将数据发送给具体的应用
    应用层：
    	应用层会先检查有没有你要发的这个地址，没的话给一个异常的响应，有的话给一个确认回执
```

